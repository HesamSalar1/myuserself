# سیستم تلگرام پیشرفته - مستندات پروژه

## نمای کلی پروژه

سیستم امنیتی پیشرفته چندزبانه برای مدیریت گفتگوهای تلگرام با استفاده از تکنولوژی‌های پیشرفته پردازش زبان طبیعی و تشخیص تهدیدات انطباقی.

## تکنولوژی‌های کلیدی
- Python-based security infrastructure
- Advanced emoji and text threat detection
- Real-time multilingual context analysis
- Adaptive machine learning security models
- Comprehensive forbidden content management system

## آخرین تغییرات (تاریخ: ۶ اسفند ۱۴۰۳)

### ✅ سیستم راهنمای جامع ایجاد شد
- **ایجاد 5 راهنمای تفصیلی:**
  - `guides/GENERAL_GUIDE.md` - راهنمای کلی سیستم
  - `guides/EMOJI_GUIDE.md` - مدیریت ایموجی‌های ممنوعه
  - `guides/WORD_GUIDE.md` - مدیریت کلمات ممنوعه
  - `guides/DELAY_GUIDE.md` - سیستم تاخیر پیشرفته
  - `guides/USER_GUIDE.md` - مدیریت کاربران
  - `guides/STATS_GUIDE.md` - آمار و گزارش‌گیری

### ✅ بهبود سیستم کامندهای کمکی
- **کامندهای جدید:**
  - `/help` - راهنمای کلی با دسترسی سریع
  - `/helpemoji` - راهنمای کامل ایموجی‌ها
  - `/helpword` - راهنمای کامل کلمات
  - `/helpdelay` - راهنمای کامل تاخیرها
  - `/helpuser` - راهنمای کامل کاربران
  - `/helpstats` - راهنمای کامل آمار

### ✅ رفع مشکل فاصله در کامند setdelay
- **مشکل:** کاربر در تنظیم تاخیر با پیغام "❌ مقدار تاخیر باید عدد باشد" مواجه می‌شد
- **علت:** سیستم فاصله‌های بین اجزای کامند را درست تشخیص نمی‌داد
- **راه‌حل:** 
  - بهبود پارس کردن کامند با regex
  - تشخیص الگوهای متصل مثل `enemy_spam2.5`
  - پیام‌های خطای بهتر با راهنمایی
  - نمونه‌های صحیح و غلط در راهنما

### ✅ بهبود سیستم بارگذاری راهنما
- **تابع load_help_guide:** بارگذاری هوشمند محتوای راهنما از فایل‌های Markdown
- **فیلتر محتوا:** استخراج مهم‌ترین بخش‌ها برای نمایش در تلگرام
- **Fallback system:** نمایش پیام مناسب در صورت عدم دسترسی به فایل

## معماری پروژه

### فایل‌های کلیدی:
- `unified_bot_launcher.py` - کنترلر اصلی سیستم
- `guides/` - دایرکتوری راهنماهای کاربری
- `COMPREHENSIVE_GUIDE.md` - راهنمای فعلی (deprecated)

### سیستم کامندها:
- **Help Commands:** پیاده‌سازی یکپارچه برای همه بخش‌ها
- **Delay Commands:** سیستم ۶ نوعه تاخیر با validation بهبود یافته
- **Management Commands:** مدیریت ایموجی، کلمات، و کاربران

## تنظیمات کاربری

### سبک ارتباط:
- استفاده از زبان فارسی برای رابط کاربری
- راهنماهای مفصل و قابل فهم
- پیام‌های خطای توضیحی با راه‌حل

### ساختار کد:
- تابع‌های helper برای کاهش تکرار
- Error handling جامع
- مدیریت فایل با encoding مناسب

## مسائل حل شده

### ✅ مشکل spacing در setdelay
- **تاریخ حل:** ۶ اسفند ۱۴۰۳
- **جزئیات:** سیستم اکنون می‌تواند `/setdelay enemy_spam2.5` را تشخیص داده و جدا کند
- **پیاده‌سازی:** استفاده از regex pattern `([a-zA-Z_]+)([0-9.]+)$`

### ✅ ساختار راهنماهای پراکنده
- **مشکل قبلی:** راهنماها در یک فایل بزرگ بودند
- **راه‌حل:** تقسیم به ۵ فایل تخصصی
- **مزایا:** سهولت نگهداری، دسترسی سریع، محتوای مفصل‌تر

## نکات فنی

### Telegram Message Limits:
- حداکثر 4096 کاراکتر برای هر پیام
- استفاده از خلاصه‌سازی هوشمند محتوا
- ارجاع به فایل کامل برای جزئیات بیشتر

### File Encoding:
- همه فایل‌های راهنما با UTF-8 encoding
- پشتیبانی کامل از متن فارسی
- سازگاری با سیستم‌های مختلف

## برنامه آینده

### پیشنهادات بهبود:
1. **آمار استفاده کامندهای help** - ردیابی پرکاربردترین بخش‌ها
2. **Search در راهنماها** - امکان جستجو در محتوای راهنماها
3. **Interactive help** - راهنمای تعاملی با keyboard inline
4. **Multi-language support** - پشتیبانی از زبان‌های دیگر

### توسعه‌های احتمالی:
- Auto-completion برای کامندها
- Template system برای پیام‌ها
- Dynamic help content بر اساس context

---
*آخرین بروزرسانی: ۶ اسفند ۱۴۰۳*