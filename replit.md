# سیستم تلگرام پیشرفته - مستندات پروژه

## نمای کلی پروژه

سیستم امنیتی پیشرفته چندزبانه برای مدیریت گفتگوهای تلگرام با استفاده از تکنولوژی‌های پیشرفته پردازش زبان طبیعی و تشخیص تهدیدات انطباقی.

## تکنولوژی‌های کلیدی
- Python-based security infrastructure
- Advanced emoji and text threat detection
- Real-time multilingual context analysis
- Adaptive machine learning security models
- Comprehensive forbidden content management system

## آخرین تغییرات (تاریخ: ۶ اسفند ۱۴۰۳)

### ✅ اتصال فایل‌های Session و API تنظیمات به لانچر یکپارچه
- **هدف:** اتصال فایل‌های session و اطلاعات API موجود در پوشه‌های جداگانه بات‌ها به سیستم لانچر
- **پیاده‌سازی Session:**
  - تصحیح مسیرهای session در `unified_bot_launcher.py`
  - استفاده از فایل‌های موجود: `bots/bot1/my_bot1.session` تا `bots/bot9/my_bot9.session`
  - بررسی خودکار وجود فایل‌های session قبل از راه‌اندازی
  - تنظیم صحیح مسیرهای دیتابیس: `bots/bot{id}/bot{id}_data.db`
- **پیاده‌سازی API:**
  - استخراج API ID و API Hash از فایل‌های `bots/bot{id}/main.py`
  - حذف وابستگی به متغیرهای محیطی و استفاده از مقادیر واقعی
  - تأیید اطلاعات Admin ID برای هر بات
- **نتیجه:** همه ۹ بات حالا کاملاً به فایل‌های session و تنظیمات API موجود متصل هستند

### ✅ رفع مشکل Syntax Error کریتیکال
- **مشکل:** فایل لانچر دارای خطاهای syntax (try بدون except) بود که مانع اجرا می‌شد
- **راه‌حل:** بازسازی کامل ساختار کد و اصلاح قالب‌بندی
- **تأیید:** فایل اکنون قابل compile و import است

### ✅ سیستم راهنمای جامع کامل شد
- **ایجاد 6 راهنمای تفصیلی:**
  - `guides/GENERAL_GUIDE.md` - راهنمای کلی سیستم
  - `guides/EMOJI_GUIDE.md` - مدیریت ایموجی‌های ممنوعه
  - `guides/WORD_GUIDE.md` - مدیریت کلمات ممنوعه
  - `guides/DELAY_GUIDE.md` - سیستم تاخیر پیشرفته
  - `guides/USER_GUIDE.md` - مدیریت کاربران
  - `guides/STATS_GUIDE.md` - آمار و گزارش‌گیری

### ✅ پیاده‌سازی کامندهای کمکی
- **کامندهای فعال:**
  - `/help` - راهنمای کلی با دسترسی سریع
  - `/helpemoji` - راهنمای کامل ایموجی‌ها
  - `/helpword` - راهنمای کامل کلمات
  - `/helpdelay` - راهنمای کامل تاخیرها (شامل رفع مشکل فاصله)
  - `/helpuser` - راهنمای کامل کاربران
  - `/helpstats` - راهنمای کامل آمار

### ✅ بهبود سیستم پارس کامندها
- **مشکل حل شده:** `/setdelay enemy_spam2.5` درست تشخیص داده نمی‌شد
- **راه‌حل:** regex pattern `([a-zA-Z_]+)([0-9.]+)$` برای جداسازی
- **بهبودها:** پیام‌های خطای بهتر، نمونه‌های کاربردی در راهنماها

## معماری پروژه

### فایل‌های کلیدی:
- `unified_bot_launcher.py` - کنترلر اصلی سیستم
- `guides/` - دایرکتوری راهنماهای کاربری
- `COMPREHENSIVE_GUIDE.md` - راهنمای فعلی (deprecated)

### سیستم کامندها:
- **Help Commands:** پیاده‌سازی یکپارچه برای همه بخش‌ها
- **Delay Commands:** سیستم ۶ نوعه تاخیر با validation بهبود یافته
- **Management Commands:** مدیریت ایموجی، کلمات، و کاربران

## تنظیمات کاربری

### سبک ارتباط:
- استفاده از زبان فارسی برای رابط کاربری
- راهنماهای مفصل و قابل فهم
- پیام‌های خطای توضیحی با راه‌حل

### ساختار کد:
- تابع‌های helper برای کاهش تکرار
- Error handling جامع
- مدیریت فایل با encoding مناسب

## مسائل حل شده

### ✅ مشکل spacing در setdelay
- **تاریخ حل:** ۶ اسفند ۱۴۰۳
- **جزئیات:** سیستم اکنون می‌تواند `/setdelay enemy_spam2.5` را تشخیص داده و جدا کند
- **پیاده‌سازی:** استفاده از regex pattern `([a-zA-Z_]+)([0-9.]+)$`

### ✅ ساختار راهنماهای پراکنده
- **مشکل قبلی:** راهنماها در یک فایل بزرگ بودند
- **راه‌حل:** تقسیم به ۵ فایل تخصصی
- **مزایا:** سهولت نگهداری، دسترسی سریع، محتوای مفصل‌تر

## نکات فنی

### Telegram Message Limits:
- حداکثر 4096 کاراکتر برای هر پیام
- استفاده از خلاصه‌سازی هوشمند محتوا
- ارجاع به فایل کامل برای جزئیات بیشتر

### File Encoding:
- همه فایل‌های راهنما با UTF-8 encoding
- پشتیبانی کامل از متن فارسی
- سازگاری با سیستم‌های مختلف

## برنامه آینده

### پیشنهادات بهبود:
1. **آمار استفاده کامندهای help** - ردیابی پرکاربردترین بخش‌ها
2. **Search در راهنماها** - امکان جستجو در محتوای راهنماها
3. **Interactive help** - راهنمای تعاملی با keyboard inline
4. **Multi-language support** - پشتیبانی از زبان‌های دیگر

### توسعه‌های احتمالی:
- Auto-completion برای کامندها
- Template system برای پیام‌ها
- Dynamic help content بر اساس context

---
*آخرین بروزرسانی: ۶ اسفند ۱۴۰۳*